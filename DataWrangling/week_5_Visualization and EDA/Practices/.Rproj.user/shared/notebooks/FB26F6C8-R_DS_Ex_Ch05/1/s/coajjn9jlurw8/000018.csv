"0","flights %>%"
"0","  filter(!is.na(arr_delay)) %>%"
"0","  # Total delay by carrier within each origin, dest"
"0","  group_by(origin, dest, carrier) %>%"
"0","  summarise("
"0","    arr_delay = sum(arr_delay),"
"0","    flights = n()"
"0","  ) %>%"
"0","  # Total delay within each origin dest"
"0","  group_by(origin, dest) %>%"
"0","  mutate("
"0","    arr_delay_total = sum(arr_delay),"
"0","    flights_total = sum(flights)"
"0","  ) %>%"
"0","  # average delay of each carrier - average delay of other carriers"
"0","  ungroup() %>%"
"0","  mutate("
"0","    arr_delay_others = (arr_delay_total - arr_delay) /"
"0","      (flights_total - flights),"
"0","    arr_delay_mean = arr_delay / flights,"
"0","    arr_delay_diff = arr_delay_mean - arr_delay_others"
"0","  ) %>%"
"0","  # remove NaN values (when there is only one carrier)"
"0","  filter(is.finite(arr_delay_diff)) %>%"
"0","  # average over all airports it flies to"
"0","  group_by(carrier) %>%"
"0","  summarise(arr_delay_diff = mean(arr_delay_diff)) %>%"
"0","  arrange(desc(arr_delay_diff))"
"2","`summarise()` regrouping output by 'origin', 'dest' (override with `.groups` argument)
"
"2","`summarise()` ungrouping output (override with `.groups` argument)
"
